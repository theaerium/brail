{"dependencies":[{"name":"./util","data":{"asyncType":null,"isESMImport":false,"locs":[{"start":{"line":1,"column":11,"index":11},"end":{"line":1,"column":28,"index":28}}],"key":"hA8WsniBZrUJ/dmBZgrNdZcEmJ8=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  var util = require(_dependencyMap[0], \"./util\");\n  var CREDENTIAL_FIELD_ID = [0x10, 0x0e];\n  var SSID_FIELD_ID = [0x10, 0x45];\n  var AUTH_TYPE_FIELD_ID = [0x10, 0x03];\n  var NETWORK_KEY_FIELD_ID = [0x10, 0x27];\n  var AUTH_TYPES = {\n    OPEN: [0x00, 0x00],\n    WPA2_PSK: [0x00, 0x20]\n  };\n  function _getLengthBytes(valueBytes) {\n    if (valueBytes.length > 255) {\n      return [Math.floor(valueBytes.length / 256), valueBytes.length % 256];\n    }\n    return [0x0, valueBytes.length];\n  }\n  function _arrayEqual(arr1, arr2) {\n    if (arr1.length !== arr2.length) {\n      return false;\n    }\n    for (var i = 0; i < arr1.length; i++) {\n      if (arr1[i] !== arr2[i]) {\n        return false;\n      }\n    }\n    return true;\n  }\n  function _getNextTLV(bytes) {\n    var type = bytes.slice(0, 2);\n    var length = bytes.slice(2, 4);\n    var value = bytes.slice(4, 4 + (length[0] * 256 + length[1]));\n    return {\n      type,\n      length,\n      value\n    };\n  }\n\n  // @returns an string of wifi credentials\n  function decode(bytes) {\n    var result = {};\n    while (bytes.length > 0) {\n      var _getNextTLV2 = _getNextTLV(bytes),\n        type = _getNextTLV2.type,\n        value = _getNextTLV2.value;\n      bytes = bytes.slice(4 + value.length, bytes.length);\n      if (_arrayEqual(CREDENTIAL_FIELD_ID, type)) {\n        var credential = value;\n        while (credential.length > 0) {\n          var tlv = _getNextTLV(credential);\n          credential = credential.slice(4 + tlv.value.length, credential.length);\n          if (_arrayEqual(AUTH_TYPE_FIELD_ID, tlv.type)) {\n            result.authType = tlv.value;\n          } else if (_arrayEqual(SSID_FIELD_ID, tlv.type)) {\n            result.ssid = util.bytesToString(tlv.value);\n          } else if (_arrayEqual(NETWORK_KEY_FIELD_ID, tlv.type)) {\n            result.networkKey = util.bytesToString(tlv.value);\n          }\n        }\n      }\n    }\n    return result;\n  }\n\n  // encode wifi object payload\n  // @returns an array of bytes\n  function encode(_ref) {\n    var ssid = _ref.ssid,\n      networkKey = _ref.networkKey,\n      _ref$authType = _ref.authType,\n      authType = _ref$authType === void 0 ? AUTH_TYPES.WPA2_PSK : _ref$authType;\n    if (typeof ssid !== 'string' || typeof networkKey !== 'string') {\n      throw new Error('');\n    }\n    ssid = util.stringToBytes(ssid);\n    networkKey = util.stringToBytes(networkKey);\n\n    // build seperated TLV\n    var authTypeTLV = [...AUTH_TYPE_FIELD_ID, 0x0, authType.length, ...authType];\n    var ssidTLV = [...SSID_FIELD_ID, 0x0, ssid.length, ...ssid];\n    var networkKeyTLV = [...NETWORK_KEY_FIELD_ID, 0x0, networkKey.length, ...networkKey];\n\n    // build credential TLV\n    var credentialValue = [...authTypeTLV, ...ssidTLV, ...networkKeyTLV];\n    var credentialTLV = [...CREDENTIAL_FIELD_ID, ..._getLengthBytes(credentialValue), ...credentialValue];\n    return credentialTLV;\n  }\n  module.exports = {\n    encodePayload: encode,\n    decodePayload: decode,\n    authTypes: AUTH_TYPES\n  };\n});","lineCount":93,"map":[[2,2,1,0],[2,6,1,4,"util"],[2,10,1,8],[2,13,1,11,"require"],[2,20,1,18],[2,21,1,18,"_dependencyMap"],[2,35,1,18],[2,48,1,27],[2,49,1,28],[3,2,3,0],[3,6,3,6,"CREDENTIAL_FIELD_ID"],[3,25,3,25],[3,28,3,28],[3,29,3,29],[3,33,3,33],[3,35,3,35],[3,39,3,39],[3,40,3,40],[4,2,4,0],[4,6,4,6,"SSID_FIELD_ID"],[4,19,4,19],[4,22,4,22],[4,23,4,23],[4,27,4,27],[4,29,4,29],[4,33,4,33],[4,34,4,34],[5,2,5,0],[5,6,5,6,"AUTH_TYPE_FIELD_ID"],[5,24,5,24],[5,27,5,27],[5,28,5,28],[5,32,5,32],[5,34,5,34],[5,38,5,38],[5,39,5,39],[6,2,6,0],[6,6,6,6,"NETWORK_KEY_FIELD_ID"],[6,26,6,26],[6,29,6,29],[6,30,6,30],[6,34,6,34],[6,36,6,36],[6,40,6,40],[6,41,6,41],[7,2,8,0],[7,6,8,6,"AUTH_TYPES"],[7,16,8,16],[7,19,8,19],[8,4,9,2,"OPEN"],[8,8,9,6],[8,10,9,8],[8,11,9,9],[8,15,9,13],[8,17,9,15],[8,21,9,19],[8,22,9,20],[9,4,10,2,"WPA2_PSK"],[9,12,10,10],[9,14,10,12],[9,15,10,13],[9,19,10,17],[9,21,10,19],[9,25,10,23],[10,2,11,0],[10,3,11,1],[11,2,13,0],[11,11,13,9,"_getLengthBytes"],[11,26,13,24,"_getLengthBytes"],[11,27,13,25,"valueBytes"],[11,37,13,35],[11,39,13,37],[12,4,14,2],[12,8,14,6,"valueBytes"],[12,18,14,16],[12,19,14,17,"length"],[12,25,14,23],[12,28,14,26],[12,31,14,29],[12,33,14,31],[13,6,15,4],[13,13,15,11],[13,14,15,12,"Math"],[13,18,15,16],[13,19,15,17,"floor"],[13,24,15,22],[13,25,15,23,"valueBytes"],[13,35,15,33],[13,36,15,34,"length"],[13,42,15,40],[13,45,15,43],[13,48,15,46],[13,49,15,47],[13,51,15,49,"valueBytes"],[13,61,15,59],[13,62,15,60,"length"],[13,68,15,66],[13,71,15,69],[13,74,15,72],[13,75,15,73],[14,4,16,2],[15,4,17,2],[15,11,17,9],[15,12,17,10],[15,15,17,13],[15,17,17,15,"valueBytes"],[15,27,17,25],[15,28,17,26,"length"],[15,34,17,32],[15,35,17,33],[16,2,18,0],[17,2,20,0],[17,11,20,9,"_arrayEqual"],[17,22,20,20,"_arrayEqual"],[17,23,20,21,"arr1"],[17,27,20,25],[17,29,20,27,"arr2"],[17,33,20,31],[17,35,20,33],[18,4,21,2],[18,8,21,6,"arr1"],[18,12,21,10],[18,13,21,11,"length"],[18,19,21,17],[18,24,21,22,"arr2"],[18,28,21,26],[18,29,21,27,"length"],[18,35,21,33],[18,37,21,35],[19,6,22,4],[19,13,22,11],[19,18,22,16],[20,4,23,2],[21,4,25,2],[21,9,25,7],[21,13,25,11,"i"],[21,14,25,12],[21,17,25,15],[21,18,25,16],[21,20,25,18,"i"],[21,21,25,19],[21,24,25,22,"arr1"],[21,28,25,26],[21,29,25,27,"length"],[21,35,25,33],[21,37,25,35,"i"],[21,38,25,36],[21,40,25,38],[21,42,25,40],[22,6,26,4],[22,10,26,8,"arr1"],[22,14,26,12],[22,15,26,13,"i"],[22,16,26,14],[22,17,26,15],[22,22,26,20,"arr2"],[22,26,26,24],[22,27,26,25,"i"],[22,28,26,26],[22,29,26,27],[22,31,26,29],[23,8,27,6],[23,15,27,13],[23,20,27,18],[24,6,28,4],[25,4,29,2],[26,4,31,2],[26,11,31,9],[26,15,31,13],[27,2,32,0],[28,2,34,0],[28,11,34,9,"_getNextTLV"],[28,22,34,20,"_getNextTLV"],[28,23,34,21,"bytes"],[28,28,34,26],[28,30,34,28],[29,4,35,2],[29,8,35,8,"type"],[29,12,35,12],[29,15,35,15,"bytes"],[29,20,35,20],[29,21,35,21,"slice"],[29,26,35,26],[29,27,35,27],[29,28,35,28],[29,30,35,30],[29,31,35,31],[29,32,35,32],[30,4,36,2],[30,8,36,8,"length"],[30,14,36,14],[30,17,36,17,"bytes"],[30,22,36,22],[30,23,36,23,"slice"],[30,28,36,28],[30,29,36,29],[30,30,36,30],[30,32,36,32],[30,33,36,33],[30,34,36,34],[31,4,37,2],[31,8,37,8,"value"],[31,13,37,13],[31,16,37,16,"bytes"],[31,21,37,21],[31,22,37,22,"slice"],[31,27,37,27],[31,28,37,28],[31,29,37,29],[31,31,37,31],[31,32,37,32],[31,36,37,36,"length"],[31,42,37,42],[31,43,37,43],[31,44,37,44],[31,45,37,45],[31,48,37,48],[31,51,37,51],[31,54,37,54,"length"],[31,60,37,60],[31,61,37,61],[31,62,37,62],[31,63,37,63],[31,64,37,64],[31,65,37,65],[32,4,38,2],[32,11,38,9],[33,6,39,4,"type"],[33,10,39,8],[34,6,40,4,"length"],[34,12,40,10],[35,6,41,4,"value"],[36,4,42,2],[36,5,42,3],[37,2,43,0],[39,2,45,0],[40,2,46,0],[40,11,46,9,"decode"],[40,17,46,15,"decode"],[40,18,46,16,"bytes"],[40,23,46,21],[40,25,46,23],[41,4,47,2],[41,8,47,6,"result"],[41,14,47,12],[41,17,47,15],[41,18,47,16],[41,19,47,17],[42,4,49,2],[42,11,49,9,"bytes"],[42,16,49,14],[42,17,49,15,"length"],[42,23,49,21],[42,26,49,24],[42,27,49,25],[42,29,49,27],[43,6,50,4],[43,10,50,4,"_getNextTLV2"],[43,22,50,4],[43,25,50,24,"_getNextTLV"],[43,36,50,35],[43,37,50,36,"bytes"],[43,42,50,41],[43,43,50,42],[44,8,50,9,"type"],[44,12,50,13],[44,15,50,13,"_getNextTLV2"],[44,27,50,13],[44,28,50,9,"type"],[44,32,50,13],[45,8,50,15,"value"],[45,13,50,20],[45,16,50,20,"_getNextTLV2"],[45,28,50,20],[45,29,50,15,"value"],[45,34,50,20],[46,6,51,4,"bytes"],[46,11,51,9],[46,14,51,12,"bytes"],[46,19,51,17],[46,20,51,18,"slice"],[46,25,51,23],[46,26,51,24],[46,27,51,25],[46,30,51,28,"value"],[46,35,51,33],[46,36,51,34,"length"],[46,42,51,40],[46,44,51,42,"bytes"],[46,49,51,47],[46,50,51,48,"length"],[46,56,51,54],[46,57,51,55],[47,6,53,4],[47,10,53,8,"_arrayEqual"],[47,21,53,19],[47,22,53,20,"CREDENTIAL_FIELD_ID"],[47,41,53,39],[47,43,53,41,"type"],[47,47,53,45],[47,48,53,46],[47,50,53,48],[48,8,54,6],[48,12,54,10,"credential"],[48,22,54,20],[48,25,54,23,"value"],[48,30,54,28],[49,8,56,6],[49,15,56,13,"credential"],[49,25,56,23],[49,26,56,24,"length"],[49,32,56,30],[49,35,56,33],[49,36,56,34],[49,38,56,36],[50,10,57,8],[50,14,57,12,"tlv"],[50,17,57,15],[50,20,57,18,"_getNextTLV"],[50,31,57,29],[50,32,57,30,"credential"],[50,42,57,40],[50,43,57,41],[51,10,58,8,"credential"],[51,20,58,18],[51,23,58,21,"credential"],[51,33,58,31],[51,34,58,32,"slice"],[51,39,58,37],[51,40,58,38],[51,41,58,39],[51,44,58,42,"tlv"],[51,47,58,45],[51,48,58,46,"value"],[51,53,58,51],[51,54,58,52,"length"],[51,60,58,58],[51,62,58,60,"credential"],[51,72,58,70],[51,73,58,71,"length"],[51,79,58,77],[51,80,58,78],[52,10,60,8],[52,14,60,12,"_arrayEqual"],[52,25,60,23],[52,26,60,24,"AUTH_TYPE_FIELD_ID"],[52,44,60,42],[52,46,60,44,"tlv"],[52,49,60,47],[52,50,60,48,"type"],[52,54,60,52],[52,55,60,53],[52,57,60,55],[53,12,61,10,"result"],[53,18,61,16],[53,19,61,17,"authType"],[53,27,61,25],[53,30,61,28,"tlv"],[53,33,61,31],[53,34,61,32,"value"],[53,39,61,37],[54,10,62,8],[54,11,62,9],[54,17,62,15],[54,21,62,19,"_arrayEqual"],[54,32,62,30],[54,33,62,31,"SSID_FIELD_ID"],[54,46,62,44],[54,48,62,46,"tlv"],[54,51,62,49],[54,52,62,50,"type"],[54,56,62,54],[54,57,62,55],[54,59,62,57],[55,12,63,10,"result"],[55,18,63,16],[55,19,63,17,"ssid"],[55,23,63,21],[55,26,63,24,"util"],[55,30,63,28],[55,31,63,29,"bytesToString"],[55,44,63,42],[55,45,63,43,"tlv"],[55,48,63,46],[55,49,63,47,"value"],[55,54,63,52],[55,55,63,53],[56,10,64,8],[56,11,64,9],[56,17,64,15],[56,21,64,19,"_arrayEqual"],[56,32,64,30],[56,33,64,31,"NETWORK_KEY_FIELD_ID"],[56,53,64,51],[56,55,64,53,"tlv"],[56,58,64,56],[56,59,64,57,"type"],[56,63,64,61],[56,64,64,62],[56,66,64,64],[57,12,65,10,"result"],[57,18,65,16],[57,19,65,17,"networkKey"],[57,29,65,27],[57,32,65,30,"util"],[57,36,65,34],[57,37,65,35,"bytesToString"],[57,50,65,48],[57,51,65,49,"tlv"],[57,54,65,52],[57,55,65,53,"value"],[57,60,65,58],[57,61,65,59],[58,10,66,8],[59,8,67,6],[60,6,68,4],[61,4,69,2],[62,4,71,2],[62,11,71,9,"result"],[62,17,71,15],[63,2,72,0],[65,2,74,0],[66,2,75,0],[67,2,76,0],[67,11,76,9,"encode"],[67,17,76,15,"encode"],[67,18,76,15,"_ref"],[67,22,76,15],[67,24,76,68],[68,4,76,68],[68,8,76,17,"ssid"],[68,12,76,21],[68,15,76,21,"_ref"],[68,19,76,21],[68,20,76,17,"ssid"],[68,24,76,21],[69,6,76,23,"networkKey"],[69,16,76,33],[69,19,76,33,"_ref"],[69,23,76,33],[69,24,76,23,"networkKey"],[69,34,76,33],[70,6,76,33,"_ref$authType"],[70,19,76,33],[70,22,76,33,"_ref"],[70,26,76,33],[70,27,76,35,"authType"],[70,35,76,43],[71,6,76,35,"authType"],[71,14,76,43],[71,17,76,43,"_ref$authType"],[71,30,76,43],[71,44,76,46,"AUTH_TYPES"],[71,54,76,56],[71,55,76,57,"WPA2_PSK"],[71,63,76,65],[71,66,76,65,"_ref$authType"],[71,79,76,65],[72,4,77,2],[72,8,77,6],[72,15,77,13,"ssid"],[72,19,77,17],[72,24,77,22],[72,32,77,30],[72,36,77,34],[72,43,77,41,"networkKey"],[72,53,77,51],[72,58,77,56],[72,66,77,64],[72,68,77,66],[73,6,78,4],[73,12,78,10],[73,16,78,14,"Error"],[73,21,78,19],[73,22,78,20],[73,24,78,22],[73,25,78,23],[74,4,79,2],[75,4,81,2,"ssid"],[75,8,81,6],[75,11,81,9,"util"],[75,15,81,13],[75,16,81,14,"stringToBytes"],[75,29,81,27],[75,30,81,28,"ssid"],[75,34,81,32],[75,35,81,33],[76,4,82,2,"networkKey"],[76,14,82,12],[76,17,82,15,"util"],[76,21,82,19],[76,22,82,20,"stringToBytes"],[76,35,82,33],[76,36,82,34,"networkKey"],[76,46,82,44],[76,47,82,45],[78,4,84,2],[79,4,85,2],[79,8,85,8,"authTypeTLV"],[79,19,85,19],[79,22,85,22],[79,23,86,4],[79,26,86,7,"AUTH_TYPE_FIELD_ID"],[79,44,86,25],[79,46,87,4],[79,49,87,7],[79,51,88,4,"authType"],[79,59,88,12],[79,60,88,13,"length"],[79,66,88,19],[79,68,89,4],[79,71,89,7,"authType"],[79,79,89,15],[79,80,90,3],[80,4,91,2],[80,8,91,8,"ssidTLV"],[80,15,91,15],[80,18,91,18],[80,19,91,19],[80,22,91,22,"SSID_FIELD_ID"],[80,35,91,35],[80,37,91,37],[80,40,91,40],[80,42,91,42,"ssid"],[80,46,91,46],[80,47,91,47,"length"],[80,53,91,53],[80,55,91,55],[80,58,91,58,"ssid"],[80,62,91,62],[80,63,91,63],[81,4,92,2],[81,8,92,8,"networkKeyTLV"],[81,21,92,21],[81,24,92,24],[81,25,93,4],[81,28,93,7,"NETWORK_KEY_FIELD_ID"],[81,48,93,27],[81,50,94,4],[81,53,94,7],[81,55,95,4,"networkKey"],[81,65,95,14],[81,66,95,15,"length"],[81,72,95,21],[81,74,96,4],[81,77,96,7,"networkKey"],[81,87,96,17],[81,88,97,3],[83,4,99,2],[84,4,100,2],[84,8,100,8,"credentialValue"],[84,23,100,23],[84,26,100,26],[84,27,100,27],[84,30,100,30,"authTypeTLV"],[84,41,100,41],[84,43,100,43],[84,46,100,46,"ssidTLV"],[84,53,100,53],[84,55,100,55],[84,58,100,58,"networkKeyTLV"],[84,71,100,71],[84,72,100,72],[85,4,101,2],[85,8,101,8,"credentialTLV"],[85,21,101,21],[85,24,101,24],[85,25,102,4],[85,28,102,7,"CREDENTIAL_FIELD_ID"],[85,47,102,26],[85,49,103,4],[85,52,103,7,"_getLengthBytes"],[85,67,103,22],[85,68,103,23,"credentialValue"],[85,83,103,38],[85,84,103,39],[85,86,104,4],[85,89,104,7,"credentialValue"],[85,104,104,22],[85,105,105,3],[86,4,107,2],[86,11,107,9,"credentialTLV"],[86,24,107,22],[87,2,108,0],[88,2,110,0,"module"],[88,8,110,6],[88,9,110,7,"exports"],[88,16,110,14],[88,19,110,17],[89,4,111,2,"encodePayload"],[89,17,111,15],[89,19,111,17,"encode"],[89,25,111,23],[90,4,112,2,"decodePayload"],[90,17,112,15],[90,19,112,17,"decode"],[90,25,112,23],[91,4,113,2,"authTypes"],[91,13,113,11],[91,15,113,13,"AUTH_TYPES"],[92,2,114,0],[92,3,114,1],[93,0,114,2],[93,3]],"functionMap":{"names":["<global>","_getLengthBytes","_arrayEqual","_getNextTLV","decode","encode"],"mappings":"AAA;ACY;CDK;AEE;CFY;AGE;CHS;AIG;CJ0B;AKI;CLgC"},"hasCjsExports":true},"type":"js/module"}]}